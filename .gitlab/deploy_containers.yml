---
# deploy containers stage
# Contains jobs which create child pipelines to deploy Agent 6 & 7 to staging repositories and to Dockerhub / GCR.

#
# Agent v6
#

deploy_containers-a6:
  stage: test
  rules:
    !reference [.on_deploy_a6]
  variables:
    PARENT_COMMIT_TAG: $CI_COMMIT_TAG
    BUCKET_BRANCH: $BUCKET_BRANCH
  trigger:
    include: .gitlab/deploy_containers/deploy_containers_a6.yml

  
deploy_containers-a7:
  stage: test
  rules:
    !reference [.on_deploy_a6]
  variables:
    PARENT_COMMIT_TAG: $CI_COMMIT_TAG
    BUCKET_BRANCH: $BUCKET_BRANCH
  trigger:
    include: .gitlab/deploy_containers/deploy_containers_a7.yml
